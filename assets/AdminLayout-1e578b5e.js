import{s as _,o as b,v as le,A as J,z as L,B as K,aQ as ue,p as ie,b as re,m as se,d as ce,C as ve,e as de,a as me,f as fe,g as he,n as ge,l as we,i as ye,h as z,t as A,j as be,a4 as pe,k as Se,aR as ke,D as Ee,F as Me,aS as Te,x as xe,aT as Ve,aU as _e,G as Be,q as Ce,u as Re,c as d,H as $,aV as He,ac as Y,aW as Le,a2 as Pe,a3 as Ye,a5 as De,a6 as F,a7 as U,a8 as H,aX as Z,aY as Ne,V as Ie,af as q,aZ as j,a_ as We,ae as Oe}from"./index-6c76402a.js";import{V as Xe}from"./VMain-a4ce6ae5.js";function ze(e){let{rootEl:r,isSticky:s,layoutItemStyles:u}=e;const t=_(!1),a=_(0),h=b(()=>{const w=typeof t.value=="boolean"?"top":t.value;return[s.value?{top:"auto",bottom:"auto",height:void 0}:void 0,t.value?{[w]:le(a.value)}:{top:u.value.top}]});J(()=>{L(s,w=>{w?window.addEventListener("scroll",g,{passive:!0}):window.removeEventListener("scroll",g)},{immediate:!0})}),K(()=>{window.removeEventListener("scroll",g)});let p=0;function g(){const w=p>window.scrollY?"up":"down",i=r.value.getBoundingClientRect(),c=parseFloat(u.value.top??0),v=window.scrollY-Math.max(0,a.value-c),m=i.height+Math.max(a.value,c)-window.scrollY-window.innerHeight,f=parseFloat(getComputedStyle(r.value).getPropertyValue("--v-body-scroll-y"))||0;i.height<window.innerHeight-c?(t.value="top",a.value=c):w==="up"&&t.value==="bottom"||w==="down"&&t.value==="top"?(a.value=window.scrollY+i.top-f,t.value=!0):w==="down"&&m<=0?(a.value=0,t.value="bottom"):w==="up"&&v<=0&&(f?t.value!=="top"&&(a.value=-v+f+c,t.value="top"):(a.value=i.top+v,t.value="top")),p=window.scrollY}return{isStuck:t,stickyStyles:h}}const Ae=100,$e=20;function G(e){const r=1.41421356237;return(e<0?-1:1)*Math.sqrt(Math.abs(e))*r}function Q(e){if(e.length<2)return 0;if(e.length===2)return e[1].t===e[0].t?0:(e[1].d-e[0].d)/(e[1].t-e[0].t);let r=0;for(let s=e.length-1;s>0;s--){if(e[s].t===e[s-1].t)continue;const u=G(r),t=(e[s].d-e[s-1].d)/(e[s].t-e[s-1].t);r+=(t-u)*Math.abs(t),s===e.length-1&&(r*=.5)}return G(r)*1e3}function Fe(){const e={};function r(t){Array.from(t.changedTouches).forEach(a=>{(e[a.identifier]??(e[a.identifier]=new ue($e))).push([t.timeStamp,a])})}function s(t){Array.from(t.changedTouches).forEach(a=>{delete e[a.identifier]})}function u(t){var w;const a=(w=e[t])==null?void 0:w.values().reverse();if(!a)throw new Error(`No samples for touch id ${t}`);const h=a[0],p=[],g=[];for(const i of a){if(h[0]-i[0]>Ae)break;p.push({t:i[0],d:i[1].clientX}),g.push({t:i[0],d:i[1].clientY})}return{x:Q(p),y:Q(g),get direction(){const{x:i,y:c}=this,[v,m]=[Math.abs(i),Math.abs(c)];return v>m&&i>=0?"right":v>m&&i<=0?"left":m>v&&c>=0?"down":m>v&&c<=0?"up":Ue()}}}return{addMovement:r,endTouch:s,getVelocity:u}}function Ue(){throw new Error}function Ze(e){let{isActive:r,isTemporary:s,width:u,touchless:t,position:a}=e;J(()=>{window.addEventListener("touchstart",R,{passive:!0}),window.addEventListener("touchmove",E,{passive:!1}),window.addEventListener("touchend",T,{passive:!0})}),K(()=>{window.removeEventListener("touchstart",R),window.removeEventListener("touchmove",E),window.removeEventListener("touchend",T)});const h=b(()=>["left","right"].includes(a.value)),{addMovement:p,endTouch:g,getVelocity:w}=Fe();let i=!1;const c=_(!1),v=_(0),m=_(0);let f;function B(n,l){return(a.value==="left"?n:a.value==="right"?document.documentElement.clientWidth-n:a.value==="top"?n:a.value==="bottom"?document.documentElement.clientHeight-n:V())-(l?u.value:0)}function C(n){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const o=a.value==="left"?(n-m.value)/u.value:a.value==="right"?(document.documentElement.clientWidth-n-m.value)/u.value:a.value==="top"?(n-m.value)/u.value:a.value==="bottom"?(document.documentElement.clientHeight-n-m.value)/u.value:V();return l?Math.max(0,Math.min(1,o)):o}function R(n){if(t.value)return;const l=n.changedTouches[0].clientX,o=n.changedTouches[0].clientY,y=25,k=a.value==="left"?l<y:a.value==="right"?l>document.documentElement.clientWidth-y:a.value==="top"?o<y:a.value==="bottom"?o>document.documentElement.clientHeight-y:V(),M=r.value&&(a.value==="left"?l<u.value:a.value==="right"?l>document.documentElement.clientWidth-u.value:a.value==="top"?o<u.value:a.value==="bottom"?o>document.documentElement.clientHeight-u.value:V());(k||M||r.value&&s.value)&&(i=!0,f=[l,o],m.value=B(h.value?l:o,r.value),v.value=C(h.value?l:o),g(n),p(n))}function E(n){const l=n.changedTouches[0].clientX,o=n.changedTouches[0].clientY;if(i){if(!n.cancelable){i=!1;return}const k=Math.abs(l-f[0]),M=Math.abs(o-f[1]);(h.value?k>M&&k>3:M>k&&M>3)?(c.value=!0,i=!1):(h.value?M:k)>3&&(i=!1)}if(!c.value)return;n.preventDefault(),p(n);const y=C(h.value?l:o,!1);v.value=Math.max(0,Math.min(1,y)),y>1?m.value=B(h.value?l:o,!0):y<0&&(m.value=B(h.value?l:o,!1))}function T(n){if(i=!1,!c.value)return;p(n),c.value=!1;const l=w(n.changedTouches[0].identifier),o=Math.abs(l.x),y=Math.abs(l.y);(h.value?o>y&&o>400:y>o&&y>3)?r.value=l.direction===({left:"right",right:"left",top:"down",bottom:"up"}[a.value]||V()):r.value=v.value>.5}const x=b(()=>c.value?{transform:a.value==="left"?`translateX(calc(-100% + ${v.value*u.value}px))`:a.value==="right"?`translateX(calc(100% - ${v.value*u.value}px))`:a.value==="top"?`translateY(calc(-100% + ${v.value*u.value}px))`:a.value==="bottom"?`translateY(calc(100% - ${v.value*u.value}px))`:V(),transition:"none"}:void 0);return{isDragging:c,dragProgress:v,dragStyles:x}}function V(){throw new Error}const qe=["start","end","left","right","top","bottom"],je=ie({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:e=>qe.includes(e)},sticky:Boolean,...re(),...se(),...ce(),...ve(),...de(),...me({tag:"nav"}),...fe()},"VNavigationDrawer"),Ge=he()({name:"VNavigationDrawer",props:je(),emits:{"update:modelValue":e=>!0,"update:rail":e=>!0},setup(e,r){let{attrs:s,emit:u,slots:t}=r;const{isRtl:a}=ge(),{themeClasses:h}=we(e),{borderClasses:p}=ye(e),{backgroundColorClasses:g,backgroundColorStyles:w}=z(A(e,"color")),{elevationClasses:i}=be(e),{mobile:c}=pe(),{roundedClasses:v}=Se(e),m=ke(),f=Ee(e,"modelValue",null,S=>!!S),{ssrBootStyles:B}=Me(),{scopeId:C}=Te(),R=xe(),E=_(!1),T=b(()=>e.rail&&e.expandOnHover&&E.value?Number(e.width):Number(e.rail?e.railWidth:e.width)),x=b(()=>Ve(e.location,a.value)),n=b(()=>!e.permanent&&(c.value||e.temporary)),l=b(()=>e.sticky&&!n.value&&x.value!=="bottom");e.expandOnHover&&e.rail!=null&&L(E,S=>u("update:rail",!S)),e.disableResizeWatcher||L(n,S=>!e.permanent&&Le(()=>f.value=!S)),!e.disableRouteWatcher&&m&&L(m.currentRoute,()=>n.value&&(f.value=!1)),L(()=>e.permanent,S=>{S&&(f.value=!0)}),_e(()=>{e.modelValue!=null||n.value||(f.value=e.permanent||!c.value)});const{isDragging:o,dragProgress:y,dragStyles:k}=Ze({isActive:f,isTemporary:n,width:T,touchless:A(e,"touchless"),position:x}),M=b(()=>{const S=n.value?0:e.rail&&e.expandOnHover?Number(e.railWidth):T.value;return o.value?S*y.value:S}),{layoutItemStyles:P,layoutItemScrimStyles:ee}=Be({id:e.name,order:b(()=>parseInt(e.order,10)),position:x,layoutSize:M,elementSize:T,active:b(()=>f.value||o.value),disableTransitions:b(()=>o.value),absolute:b(()=>e.absolute||l.value&&typeof D.value!="string")}),{isStuck:D,stickyStyles:te}=ze({rootEl:R,isSticky:l,layoutItemStyles:P}),N=z(b(()=>typeof e.scrim=="string"?e.scrim:null)),ae=b(()=>({...o.value?{opacity:y.value*.2,transition:"none"}:void 0,...ee.value}));Ce({VList:{bgColor:"transparent"}});function ne(){E.value=!0}function oe(){E.value=!1}return Re(()=>{const S=t.image||e.image;return d(Y,null,[d(e.tag,$({ref:R,onMouseenter:ne,onMouseleave:oe,class:["v-navigation-drawer",`v-navigation-drawer--${x.value}`,{"v-navigation-drawer--expand-on-hover":e.expandOnHover,"v-navigation-drawer--floating":e.floating,"v-navigation-drawer--is-hovering":E.value,"v-navigation-drawer--rail":e.rail,"v-navigation-drawer--temporary":n.value,"v-navigation-drawer--active":f.value,"v-navigation-drawer--sticky":l.value},h.value,g.value,p.value,i.value,v.value,e.class],style:[w.value,P.value,k.value,B.value,te.value,e.style]},C,s),{default:()=>{var I,W,O,X;return[S&&d("div",{key:"image",class:"v-navigation-drawer__img"},[t.image?(I=t.image)==null?void 0:I.call(t,{image:e.image}):d("img",{src:e.image,alt:""},null)]),t.prepend&&d("div",{class:"v-navigation-drawer__prepend"},[(W=t.prepend)==null?void 0:W.call(t)]),d("div",{class:"v-navigation-drawer__content"},[(O=t.default)==null?void 0:O.call(t)]),t.append&&d("div",{class:"v-navigation-drawer__append"},[(X=t.append)==null?void 0:X.call(t)])]}}),d(He,{name:"fade-transition"},{default:()=>[n.value&&(o.value||f.value)&&!!e.scrim&&d("div",$({class:["v-navigation-drawer__scrim",N.backgroundColorClasses.value],style:[ae.value,N.backgroundColorStyles.value],onClick:()=>f.value=!1},C),null)]})])}),{isStuck:D}}}),Ke={__name:"AdminLayout",setup(e){const r=Pe(),{username:s,picture:u}=Ye(r),t=[{to:"/admin/products",title:"商品管理",icon:"mdi-shopping"},{to:"/admin/orders",title:"訂單管理",icon:"mdi-format-list-numbered"},{to:"/",title:"回首頁",icon:"mdi-home"}];return(a,h)=>{const p=De("RouterView");return F(),U(Y,null,[d(Ge,{permanent:"",color:"primary"},{default:H(()=>[d(Z,{class:"adminAvatar d-flex align-center flex-column"},{default:H(()=>[d(Ne,{size:"80"},{default:H(()=>[d(Ie,{src:q(r).picture},null,8,["src"])]),_:1}),d(j,{title:q(s)},null,8,["title"])]),_:1}),d(We),d(Z,null,{default:H(()=>[(F(),U(Y,null,Oe(t,g=>d(j,{key:g.to,to:g.to,title:g.title,"prepend-icon":g.icon},null,8,["to","title","prepend-icon"])),64))]),_:1})]),_:1}),d(Xe,null,{default:H(()=>[d(p)]),_:1})],64)}}};export{Ke as default};
